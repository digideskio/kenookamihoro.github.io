<div class="highlight"><pre><span class="gh">Neighbor Articles Plugin for Pelican</span>
<span class="gh">#####################################</span>
<span class="nc">:lang:</span> <span class="nf">zh</span>
<span class="nc">:date:</span> <span class="nf">2016-01-18 13:45</span>
<span class="nc">:series:</span>  <span class="nf">Pelican_Plugins</span>
<span class="nc">:tags:</span> <span class="nf">pelican,plugin</span>

<span class="p">..</span> <span class="ow">contents</span><span class="p">::</span>

This plugin adds <span class="s">``next_article``</span> (newer) and <span class="s">``prev_article``</span> (older)
variables to the article&#39;s context.

Also adds <span class="s">``next_article_in_category``</span> and <span class="s">``prev_article_in_category``</span>.



<span class="gh">Usage</span>
<span class="gh">------</span>

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">html+jinja</span>

    <span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">article.prev_article</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITEURL</span> <span class="cp">}}</span><span class="s">/</span><span class="cp">{{</span> <span class="nv">article.prev_article.url</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
                <span class="cp">{{</span> <span class="nv">article.prev_article.title</span> <span class="cp">}}</span>
            <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">article.next_article</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITEURL</span> <span class="cp">}}</span><span class="s">/</span><span class="cp">{{</span> <span class="nv">article.next_article.url</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
                <span class="cp">{{</span> <span class="nv">article.next_article.title</span> <span class="cp">}}</span>
            <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
   &lt;/ul&gt;
   &lt;ul&gt;
    {% if article.prev_article_in_category %}
        &lt;li&gt;
            &lt;a href=&quot;{{ SITEURL }}/{{ article.prev_article_in_category.url}}&quot;&gt;
                {{ article.prev_article_in_category.title }}
            &lt;/a&gt;
        &lt;/li&gt;
    {% endif %}
    {% if article.next_article_in_category %}
        &lt;li&gt;
            &lt;a href=&quot;{{ SITEURL }}/{{ article.next_article_in_category.url}}&quot;&gt;
                {{ article.next_article_in_category.title }}
            &lt;/a&gt;
        &lt;/li&gt;
    {% endif %}
    &lt;/ul&gt;

<span class="gh">Usage with the Subcategory plugin</span>
<span class="gh">-----------------------------------</span>

If you want to get the neigbors within a subcategory it&#39;s a little different.
Since an article can belong to more than one subcategory, subcategories are
stored in a list. If you have an article with subcategories like

<span class="s">``Category/Foo/Bar``</span>

it will belong to both subcategory Foo, and Foo/Bar. Subcategory neighbors are
added to an article as <span class="s">``next_article_in_subcategory#``</span> and
<span class="s">``prev_article_in_subcategory#``</span> where <span class="s">``#``</span> is the level of subcategory. So using
the example from above, subcategory1 will be Foo, and subcategory2 Foo/Bar.
Therefor the usage with subcategories is:

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">html+jinja</span>

    <span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">article.prev_article_in_subcategory1</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITEURL</span> <span class="cp">}}</span><span class="s">/</span><span class="cp">{{</span> <span class="nv">article.prev_article_in_subcategory1.url</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
                <span class="cp">{{</span> <span class="nv">article.prev_article_in_subcategory1.title</span> <span class="cp">}}</span>
            <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">article.next_article_in_subcategory1</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">SITEURL</span> <span class="cp">}}</span><span class="s">/</span><span class="cp">{{</span> <span class="nv">article.next_article_in_subcategory1.url</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
                <span class="cp">{{</span> <span class="nv">article.next_article_in_subcategory1.title</span> <span class="cp">}}</span>
            <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
   &lt;/ul&gt;
   &lt;ul&gt;
    {% if article.prev_article_in_subcategory2 %}
        &lt;li&gt;
            &lt;a href=&quot;{{ SITEURL }}/{{ article.prev_article_in_subcategory2.url}}&quot;&gt;
                {{ article.prev_article_in_subcategory2.title }}
            &lt;/a&gt;
        &lt;/li&gt;
    {% endif %}
    {% if article.next_article_in_subcategory2 %}
        &lt;li&gt;
            &lt;a href=&quot;{{ SITEURL }}/{{ article.next_article_in_subcategory2.url}}&quot;&gt;
                {{ article.next_article_in_subcategory2.title }}
            &lt;/a&gt;
        &lt;/li&gt;
    {% endif %}
    &lt;/ul&gt;
</pre></div>
