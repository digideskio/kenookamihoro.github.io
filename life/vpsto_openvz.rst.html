<div class="highlight"><pre><span></span><span class="gh">凤凰卷家的 vps.to 的 OpenVZ VPS 试用小记</span>
<span class="gh">======================================================</span>
<span class="nc">:slug:</span> <span class="nf">vpsto_openvz</span>
<span class="nc">:date:</span> <span class="nf">2016-02-22</span>

<span class="cp">.. PELICAN_BEGIN_SUMMARY</span>

论感情牌+吐槽的必要性~（雾 

<span class="cp">.. PELICAN_END_SUMMARY</span>

<span class="p">..</span> <span class="ow">contents</span><span class="p">::</span>

凤凰卷( <span class="na">:fref:</span><span class="nv">`phoenixlzx`</span> )家的 <span class="s">`vps.to </span><span class="si">&lt;http://vps.to&gt;</span><span class="s">`_</span> <span class="s">[#]_</span> 最近新上线了 OpenVZ 架构的 VPS .卷说不会超售,咱相信她 (谁叫咱认为她是个好人咧~)

<span class="p">..</span> <span class="nt">[#]</span> 其实和喵窝一样,真正的大 boss 藏在后面~ (逃~

因为没人搭理她,她还在 <span class="na">:irc:</span><span class="nv">`#archlinux-cn`</span> 里吐槽了一番:

    [phoenixlzx] 没人理会透明卷

    [phoenixlzx] 还是滚去睡觉好了

    (quininer) 凤凰怎么了

    [phoenixlzx] 心情不好

    (quininer) momo

    [phoenixlzx] 当时要做的时候都说做做做做好了买买买

    [phoenixlzx] 然后现在做好了都不吱声了

    [phoenixlzx] 订单呢？订单呢？

    [phoenixlzx] 真是不靠谱
    
不过说到底还是在吐槽 OpenVZ 架构……

    
<span class="gh">说到底还是在吐槽 OpenVZ 架构</span>
<span class="gh">-----------------------------------------</span>

    OpenVZ是基于Linux内核和作业系统的操作系统级虚拟化技术。OpenVZ允许物理服务器运行多个操作系统，被称虚拟专用服务器（VPS，Virtual Private Server）或虚拟环境（VE，Virtual Environment）。

    与VMware这种虚拟机和Xen这种硬件辅助虚拟化技术相比，OpenVZ的主机与客户系统都必须是Linux（虽然在不同的虚拟环境里可以用不同的Linux发行版）。但是，OpenVZ声称这样做有性能上的优势。根据OpenVZ网站的说法，使用OpenVZ与使用独立的实体服务器相比，性能只会有1-3%的损失。

    OpenVZ是SWsoft, Inc.公司开发的专有软件Virtuozzo的基础。OpenVZ的授权为GPLv2。

    OpenVZ由两部分组成，一个经修改过的操作系统核心与一套用户工具。
    
    -- <span class="s">`Wikipedia:OpenVZ </span><span class="si">&lt;https://zh.wikipedia.org/wiki/OpenVZ&gt;</span><span class="s">`_</span>
    
简单来说,OpenVZ 架构不是像 KVM Vmware 一类的完全虚拟化.而且 <span class="na">:ruby:</span><span class="nv">`容易|几乎总是`</span> 被服务商超售(不然咋会卖那么便宜😂😂).

不过由于和 <span class="na">:ruby:</span><span class="nv">`主机|母鸡`</span> 共享内核，听说会有性能优势？

<span class="gh">购买时的一点吐槽</span>
<span class="gh">------------------------------------------</span>

<span class="s">`链接在这,标准的 WHMCS 面板. </span><span class="si">&lt;https://portal.vpsto.com/cart.php?gid=9&gt;</span><span class="s">`_</span>

可是为啥服务开通的确认邮件被 Yandex Mail 当作 spam 了啊 (ノ=Д=)ノ┻━┻

除了这个其它还OK,VPS 的管理界面也是标准的 SolusVM 面板。

<span class="na">:del:</span><span class="nv">`真的是太标准了好像连主题都没改😂😂`</span>

另外没有咱喜欢的 Arch Linux 还是很遗憾呐~(卷把锅甩给了OpenVZ,因为母鸡定制的内核太老 (2.6.x) 😂😂

顺便提一下这次咱买的是最便宜的那个(一个月也要99😂😂),配置大概像这样:

    1 Core CPU

    1 GB Guaranteed RAM

    25 GB HDD

    400 GB Premium Traffic @ 100Mbps Bandwidth

    SoftLayer Hong Kong Datacenter

<span class="gh">日常</span>
<span class="gh">----------------------------------------</span>

刚开通时的系统是 CentOS 6 , <span class="na">:del:</span><span class="nv">`吓的咱赶紧换成了 Debian 8`</span>,VPS 控制面板上就重装系统,大概一两分钟左右吧.

登录,先 apt update 一下,连的好像是 Debian 官方的仓库,速度不够快.

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">bash</span>

    <span class="c1"># apt update</span>
    .....
    Fetched <span class="m">528</span> kB in 5s <span class="o">(</span>94.2 kB/s<span class="o">)</span>               

接下来更新系统,速度在 2M/s 左右,还可以(懒得换镜像源了😂😂

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">bash</span>

    root@s17931102:~# apt full-upgrade
    Reading package lists... Done
    Building dependency tree       
    Reading state information... Done
    Calculating upgrade... Done
    The following NEW packages will be installed:
        e2fsprogs init libss2
    The following packages will be upgraded:
        cpio libc-bin libc6 libgcrypt20 locales multiarch-support
    <span class="m">6</span> upgraded, <span class="m">3</span> newly installed, <span class="m">0</span> to remove and <span class="m">0</span> not upgraded.
    Need to get 11.5 MB of archives.
    After this operation, <span class="m">3327</span> kB of additional disk space will be used.
    Do you want to <span class="k">continue</span>? <span class="o">[</span>Y/n<span class="o">]</span> 
    ...
    Fetched 11.5 MB in 4s <span class="o">(</span><span class="m">2705</span> kB/s<span class="o">)</span>
    ...

<span class="gh">胡乱的性能测试</span>
<span class="gh">-------------------------------</span>

<span class="s">`咱照着这篇文章小小的测试了一下😂😂 </span><span class="si">&lt;http://www.freehao123.com/vps-cpu-io-unixbench/&gt;</span><span class="s">`_</span>

CPU 是 Intel(R) Xeon(R) CPU E5-2650 v3 @ 2.30GHz .

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">bash</span>

    <span class="c1"># cat /proc/cpuinfo</span>
    processor	: 0
    vendor_id	: GenuineIntel
    cpu family	: 6
    model		: 63
    model name	: Intel<span class="o">(</span>R<span class="o">)</span> Xeon<span class="o">(</span>R<span class="o">)</span> CPU E5-2650 v3 @ 2.30GHz
    stepping	: 2
    microcode	: 45
    cpu MHz		: 2300.033
    cache size	: <span class="m">25600</span> KB
    ......

<span class="na">:code:</span><span class="nv">`free -m`</span> 了一下:

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">bash</span>

    root@s17931102:~# free -m
                 total       used       free     shared    buffers     cached
    Mem:          <span class="m">1024</span>        <span class="m">315</span>        <span class="m">708</span>         <span class="m">14</span>          <span class="m">0</span>        292
    -/+ buffers/cache:         <span class="m">23</span>       1000
    Swap:            <span class="m">0</span>          <span class="m">0</span>          0

Debian 8 Minimal,还没有装任何软件时大概用掉了23M 内存.

<span class="na">:code:</span><span class="nv">`dd`</span> 了两下,速度不错:

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">bash</span>

    root@s17931102:~# dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span><span class="nb">test</span> <span class="nv">bs</span><span class="o">=</span>64k <span class="nv">count</span><span class="o">=</span>4k <span class="nv">oflag</span><span class="o">=</span>dsync
    4096+0 records in
    4096+0 records out
    <span class="m">268435456</span> bytes <span class="o">(</span><span class="m">268</span> MB<span class="o">)</span> copied, 1.08052 s, <span class="m">248</span> MB/s
    root@s17931102:~# dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span><span class="nb">test</span> <span class="nv">bs</span><span class="o">=</span>8k <span class="nv">count</span><span class="o">=</span>256k <span class="nv">conv</span><span class="o">=</span>fdatasync
    262144+0 records in
    262144+0 records out
    <span class="m">2147483648</span> bytes <span class="o">(</span>2.1 GB<span class="o">)</span> copied, 2.51345 s, <span class="m">854</span> MB/s

下载一个来自 Cachefly 的测速文件,差不多跑满了 100Mb 的带宽:

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">bash</span>

    root@s17931102:~# wget http://cachefly.cachefly.net/100mb.test
    Resolving cachefly.cachefly.net <span class="o">(</span>cachefly.cachefly.net<span class="o">)</span>... 205.234.175.175
    Connecting to cachefly.cachefly.net <span class="o">(</span>cachefly.cachefly.net<span class="o">)</span><span class="p">|</span>205.234.175.175<span class="p">|</span>:80... connected.
    HTTP request sent, awaiting response... <span class="m">200</span> OK
    Length: <span class="m">104857600</span> <span class="o">(</span>100M<span class="o">)</span> <span class="o">[</span>application/octet-stream<span class="o">]</span>
    Saving to: <span class="s1">&#39;100mb.test&#39;</span>
    
    100mb.test                    100%<span class="o">[===================================================</span>&gt;<span class="o">]</span> 100.00M  11.7MB/s   in 9.0s   
    
    2016-02-22 02:52:54 <span class="o">(</span>11.1 MB/s<span class="o">)</span> - <span class="s1">&#39;100mb.test&#39;</span> saved <span class="o">[</span>104857600/104857600<span class="o">]</span>
    

从 <span class="na">:fref:</span><span class="nv">`cuihao`</span> 的镜像源下载 Arch Linux 的安装映像,也能跑满百兆带宽:

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">bash</span>

    root@s17931102:~# wget https://mirrors.ustc.edu.cn/archlinux/iso/2016.02.01/archlinux-2016.02.01-dual.iso
    Resolving mirrors.ustc.edu.cn <span class="o">(</span>mirrors.ustc.edu.cn<span class="o">)</span>... 202.141.176.110, 2001:da8:d800:95::110
    Connecting to mirrors.ustc.edu.cn <span class="o">(</span>mirrors.ustc.edu.cn<span class="o">)</span><span class="p">|</span>202.141.176.110<span class="p">|</span>:443... connected.
    HTTP request sent, awaiting response... <span class="m">200</span> OK
    Length: <span class="m">735051776</span> <span class="o">(</span>701M<span class="o">)</span> <span class="o">[</span>application/octet-stream<span class="o">]</span>
    Saving to: <span class="s1">&#39;archlinux-2016.02.01-dual.iso&#39;</span>

    archlinux-2016.02.01-dual.iso 100%<span class="o">[===================================================</span>&gt;<span class="o">]</span> 701.00M  11.7MB/s   in 63s    

    2016-02-22 02:57:09 <span class="o">(</span>11.2 MB/s<span class="o">)</span> - <span class="s1">&#39;archlinux-2016.02.01-dual.iso&#39;</span> saved <span class="o">[</span>735051776/735051776<span class="o">]</span>

由于没装web服务器所以先不测试出口带宽......

运行了一个小脚本来测速,噫可赛艇~:

http://freevps.us/downloads/bench.sh

<span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">bash</span>

    Speedtest <span class="o">(</span>IPv4 only<span class="o">)</span>
    ---------------------
    Your public IPv4 is foo
    
    Location		Provider	Speed
    CDN			Cachefly	11.1MB/s
    
    Atlanta, GA, US		Coloat		7.26MB/s 
    Dallas, TX, US		Softlayer	8.13MB/s 
    Seattle, WA, US		Softlayer	10.6MB/s 
    San Jose, CA, US	Softlayer	9.82MB/s 
    Washington, DC, US	Softlayer 	9.11MB/s 
    
    Tokyo, Japan		Linode		11.2MB/s 
    Singapore 		Softlayer	11.5MB/s 
    
    Rotterdam, Netherlands	id3.net		6.91MB/s
    Haarlem, Netherlands	Leaseweb	7.45MB/s 
    
综上所述,网速棒棒哒~

编译来自 <span class="s">`lnmp.org </span><span class="si">&lt;http://lnmp.org&gt;</span><span class="s">`_</span> 的LNMP 一键安装包......

用了40多分钟,算不算快咧 _(:з」∠)_ 

<span class="gh">一点总结</span>
<span class="gh">-------------------</span>

总之卷的 VPS 还是很棒呐~(๑•̀ㅂ•́)و✧，不过真的还是有些贵😂😂，对于只想搭个梯子的人来讲花销有些大 (\´･ω･\`).

<span class="na">:del:</span><span class="nv">`为了接着用 Arch Linux,咱还是回去用 conoha 吧 _(:з」∠)_`</span>
</pre></div>
